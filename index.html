<html>
	<head>
		<title>סימולציית מס הכנסה לשכירים</title>
		<script src="2010.js"></script>
		<script src="2011.js"></script>
		<script src="2012.js"></script>
		<script src="2013_2014.js"></script>
		<script src="2015.js"></script>
		<script src="2016.js"></script>
		<style>
			label { display: block; }
		</style>
	</head>
	<body dir="rtl">
		<h1>סימולציית מס הכנסה לשכירים</h1>
		<label><span>בחר שנה</span>
			<select id="year" name="year">
				<option value="2010">2010</option>
				<option value="2011">2011</option>
				<option value="2013">2013</option>
				<option value="2014">2014</option>
				<option value="2015">2015</option>
				<option value="2016">2016</option>
			</select>
		</label>
		<label><span>שכר שנתי</span><input type="number" id="yearly_income" name="yearly_income" value="240000"/></label>
		<label><span>מס שנתי</span><input type="number" name="yearly_tax" /></label>
		<label><span>תרומות שנתיות</span><input type="number" name="yearly_donations" /></label>
		<label><span>נקודות זיכוי</span><input type="number" step="0.25" id="tax_points" name="tax_points" value="2.25"/></label>
		<label><span>הפרשות לביטוח פנסיוני</span><input type="number" id="pension" name="pension" value="13200"/></label>
		<label><span>מס לתשלום</span><output id="calculated_tax"/></label>
		<button onclick="calc()">חשב</button>
	<script>
		function calc(){
			var year = document.getElementById("year").value;
			var taxData = tax_details[year];
			var income = parseInt(document.getElementById("yearly_income").value);
			var points = parseFloat(document.getElementById("tax_points").value);
			var pension = parseFloat(document.getElementById("pension").value);
			var donations = parseFloat(document.getElementById("yearly_donations").value);
			var levels = taxData.tax_levels;
			var tax = 0;
			var taxLevel = 0;
			for(var i=0;i<levels.length;++i)
			{
				if (income <  levels[i].min) break;
				taxLevel = i;
			}

			var level = levels[taxLevel];
			tax = level.additive + (income - level.min) * level.tax;
			tax -= taxData.bonus_point_value * points;
			tax -= Math.min(pension, taxData.max_pension) * taxData.pension_discount;
			tax -= yearly_donations * taxData.donation_discout;
			document.getElementById("calculated_tax").value = tax;
		}
	</script>
	</body>
</html>
